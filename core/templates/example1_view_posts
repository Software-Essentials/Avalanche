// Imports
const { AVAViewController } = require("avacore");
const Post = require("../models/Post");


/**
 *
 */
class PostViewController extends AVAViewController {

  constructor(request, response) {
    super(request, response);
  }


  willLoad(request, response, self) {
    self.template = "posts";
    const options = {
      onSuccess: ({results}) => {
        self.variables.posts = results;
        super.willLoad(request, response, self);
      },
      onFailure: ({error}) => {
        self.variables.posts = [];
        super.willLoad(request, response, self);
      }
    };
    Post.all(options);
  }

}


module.exports = PostViewController;